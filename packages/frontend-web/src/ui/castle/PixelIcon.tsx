/**
 * Pixel Art Icon System
 * Sierra/Quest for Glory era pixel art icons
 * All icons are 16x16 pixel grid, rendered as SVG for crisp scaling
 */

import React from 'react';
import './PixelIcon.css';

export type PixelIconName =
  | 'sword'
  | 'shield'
  | 'target'
  | 'flame'
  | 'star'
  | 'skull'
  | 'trophy'
  | 'eye'
  | 'castle'
  | 'gem'
  | 'scroll'
  | 'gear'
  | 'sparkle'
  | 'warning'
  | 'bolt'
  | 'ghost'
  | 'crown'
  | 'chart'
  | 'orb'
  | 'cross'
  | 'check'
  | 'mountain'
  | 'file'
  | 'explosion'
  | 'hole'
  | 'brick'
  | 'arrow-up'
  | 'temple';

interface PixelIconProps {
  name: PixelIconName;
  size?: 'small' | 'medium' | 'large' | number;
  color?: string;
  className?: string;
}

// 16x16 pixel art definitions (1 = filled, 0 = empty)
// Each icon is defined as a string of 256 chars (16x16)
const ICON_DATA: Record<PixelIconName, string> = {
  sword: `
    0000000010000000
    0000000110000000
    0000001110000000
    0000011110000000
    0000111100000000
    0001111000000000
    0011110000000000
    0111100000000000
    1111000000000000
    0110000000100000
    0000000001100000
    0000000011000000
    0000000110000000
    0000001100000000
    0000011000000000
    0000010000000000
  `,
  shield: `
    0011111111110000
    0111111111111000
    1111111111111100
    1111111111111100
    1111100001111100
    1111100001111100
    1111111111111100
    0111111111111000
    0111111111111000
    0011111111110000
    0001111111100000
    0000111111000000
    0000011110000000
    0000001100000000
    0000000000000000
    0000000000000000
  `,
  target: `
    0000011110000000
    0001100001100000
    0010000000010000
    0100011110001000
    0100100001001000
    1001000000100100
    1001000000100100
    1001001100100100
    1001001100100100
    1001000000100100
    0100100001001000
    0100011110001000
    0010000000010000
    0001100001100000
    0000011110000000
    0000000000000000
  `,
  flame: `
    0000001000000000
    0000011100000000
    0000011100000000
    0000111110000000
    0001111110000000
    0001111111000000
    0011111111000000
    0011101111100000
    0111101111100000
    0111001011100000
    0111000011100000
    0111000011100000
    0011100111000000
    0001111110000000
    0000111100000000
    0000000000000000
  `,
  star: `
    0000001100000000
    0000001100000000
    0000011110000000
    0000011110000000
    1111111111111100
    0111111111111000
    0001111111100000
    0000111111000000
    0001111111100000
    0011110011110000
    0011100001110000
    0111000000111000
    0110000000011000
    0100000000001000
    0000000000000000
    0000000000000000
  `,
  skull: `
    0000111111000000
    0011111111110000
    0111111111111000
    0111111111111000
    0111100001111000
    0111100001111000
    0111111111111000
    0011111111110000
    0001111111100000
    0000110011000000
    0001111111100000
    0000100001000000
    0000111111000000
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  trophy: `
    0111111111111100
    0111111111111100
    0011111111111000
    0001111111110000
    0001111111110000
    0000111111100000
    0000011111000000
    0000001110000000
    0000001110000000
    0000001110000000
    0000011111000000
    0000111111100000
    0001111111110000
    0001111111110000
    0000000000000000
    0000000000000000
  `,
  eye: `
    0000000000000000
    0000111111000000
    0011111111110000
    0111111111111000
    1111100001111100
    1111000000111100
    1111011110111100
    1111011110111100
    1111000000111100
    1111100001111100
    0111111111111000
    0011111111110000
    0000111111000000
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  castle: `
    0100010001000100
    1110111011101110
    1110111011101110
    1111111111111110
    1111111111111110
    0111111111111100
    0111111111111100
    0111100001111100
    0111100001111100
    0111100001111100
    0111111111111100
    0111111111111100
    0111111111111100
    0111111111111100
    1111111111111110
    0000000000000000
  `,
  gem: `
    0000011110000000
    0000111111000000
    0001111111100000
    0011111111110000
    0111111111111000
    1111111111111100
    1111111111111100
    0111111111111000
    0011111111110000
    0001111111100000
    0000111111000000
    0000011110000000
    0000001100000000
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  scroll: `
    0001111111100000
    0011111111110000
    0110000000011000
    0110000000011000
    0110000000011000
    0110011111011000
    0110000000011000
    0110011110011000
    0110000000011000
    0110011111011000
    0110000000011000
    0110000000011000
    0011111111110000
    0001111111100000
    0000000000000000
    0000000000000000
  `,
  gear: `
    0000011110000000
    0000111111000000
    0111111111111000
    0111111111111000
    1111100001111100
    1111000000111100
    1110000000011100
    1110000000011100
    1110000000011100
    1111000000111100
    1111100001111100
    0111111111111000
    0111111111111000
    0000111111000000
    0000011110000000
    0000000000000000
  `,
  sparkle: `
    0000001000000000
    0000001000000000
    0000001000000000
    0000001000000000
    0000011100000000
    1111111111110000
    0000011100000000
    0000001000000000
    0000001000000000
    0000001000000000
    0000001000000000
    0000000000000000
    0000000000000000
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  warning: `
    0000001100000000
    0000001100000000
    0000011110000000
    0000011110000000
    0000111111000000
    0000111111000000
    0001111111100000
    0001110011100000
    0011110011110000
    0011110011110000
    0111110011111000
    0111100001111000
    1111111111111100
    1111111111111100
    0000000000000000
    0000000000000000
  `,
  bolt: `
    0000011111000000
    0000111110000000
    0001111100000000
    0011111000000000
    0111110000000000
    1111111111000000
    0000011110000000
    0000111100000000
    0001111000000000
    0011110000000000
    0111100000000000
    0111000000000000
    0110000000000000
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  ghost: `
    0000111111000000
    0011111111110000
    0111111111111000
    0111100001111000
    0111100001111000
    0111111111111000
    0111111111111000
    0111111111111000
    0111111111111000
    0111111111111000
    0111011101111000
    0110011100111000
    0100010100011000
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  crown: `
    0100000100000100
    0110001110001100
    0111011111011100
    0111111111111100
    0111111111111100
    0111111111111100
    0011111111111000
    0011111111111000
    0001111111110000
    0001111111110000
    0011111111111000
    0011111111111000
    0000000000000000
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  chart: `
    0000000000000110
    0000000000001110
    0000000011001110
    0000000111001110
    0000001111001110
    0000001111001110
    0011001111001110
    0111001111001110
    0111001111001110
    0111001111001110
    0111001111001110
    0111001111001110
    1111111111111110
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  orb: `
    0000011110000000
    0001111111100000
    0011111111110000
    0111110011111000
    0111100001111000
    1111100001111100
    1111111111111100
    1111111111111100
    1111111111111100
    0111111111111000
    0111111111111000
    0011111111110000
    0001111111100000
    0000011110000000
    0000000000000000
    0000000000000000
  `,
  cross: `
    0000000000000000
    0011000000001100
    0111100000011110
    0011110000111100
    0001111001111000
    0000111111110000
    0000011111100000
    0000011111100000
    0000111111110000
    0001111001111000
    0011110000111100
    0111100000011110
    0011000000001100
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  check: `
    0000000000000000
    0000000000001100
    0000000000011100
    0000000000111000
    0000000001110000
    0000000011100000
    0000000111000000
    0110001110000000
    0111011100000000
    0011111000000000
    0001110000000000
    0000100000000000
    0000000000000000
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  mountain: `
    0000000000000000
    0000000000000000
    0000000000001000
    0000000000011000
    0000000000111000
    0000000001111000
    0000000011111000
    0000000111111000
    0000001111111000
    0000011111111000
    0000111111111000
    0001111111111000
    0011111111111000
    0111111111111000
    1111111111111000
    1111111111111110
  `,
  file: `
    0000000000000000
    0001111111110000
    0001111111110000
    0001100000110000
    0001100000110000
    0001111111110000
    0001111111110000
    0001100000110000
    0001100000110000
    0001111111110000
    0001111111110000
    0001100000110000
    0001100000110000
    0001111111110000
    0001111111110000
    0000000000000000
  `,
  explosion: `
    0000000000000000
    0000000100000000
    0000001110000000
    0000011111000000
    0000111111100000
    0001111111110000
    0011111111111000
    0111111111111100
    1111111111111110
    0111111111111100
    0011111111111000
    0001111111110000
    0000111111100000
    0000011111000000
    0000001110000000
    0000000100000000
  `,
  hole: `
    0000000000000000
    0000000000000000
    0000011111000000
    0001111111110000
    0011111111111000
    0111111111111100
    0111111111111100
    0111111111111100
    0111111111111100
    0011111111111000
    0001111111110000
    0000011111000000
    0000000000000000
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  brick: `
    1111111111111110
    1000000000000001
    1111111111111110
    1000000000000001
    1111111111111110
    1000000000000001
    1111111111111110
    1000000000000001
    1111111111111110
    1000000000000001
    1111111111111110
    1000000000000001
    1111111111111110
    1000000000000001
    1111111111111110
    0000000000000000
  `,
  'arrow-up': `
    0000001100000000
    0000011110000000
    0000111111000000
    0001111111100000
    0011111111110000
    0111111111111000
    0000001100000000
    0000001100000000
    0000001100000000
    0000001100000000
    0000001100000000
    0000001100000000
    0000000000000000
    0000000000000000
    0000000000000000
    0000000000000000
  `,
  temple: `
    0000000000000000
    0000001100000000
    0000011110000000
    0000111111000000
    0001111111100000
    0011111111110000
    0111111111111000
    1111111111111100
    1111111111111100
    0111111111111000
    0011111111110000
    0001111111100000
    0000111111000000
    0000011110000000
    0000001100000000
    0000000000000000
  `,
};

// Parse icon data into array of pixel coordinates
function parseIconData(data: string): boolean[][] {
  const cleaned = data.replace(/\s/g, '');
  const grid: boolean[][] = [];
  for (let y = 0; y < 16; y++) {
    grid[y] = [];
    for (let x = 0; x < 16; x++) {
      grid[y][x] = cleaned[y * 16 + x] === '1';
    }
  }
  return grid;
}

// Get size in pixels
function getSize(size: PixelIconProps['size']): number {
  if (typeof size === 'number') return size;
  switch (size) {
    case 'small': return 16;
    case 'medium': return 24;
    case 'large': return 32;
    default: return 24;
  }
}

export const PixelIcon: React.FC<PixelIconProps> = ({
  name,
  size = 'medium',
  color,
  className = '',
}) => {
  const iconData = ICON_DATA[name];
  if (!iconData) {
    console.warn(`PixelIcon: Unknown icon "${name}"`);
    return null;
  }

  const grid = parseIconData(iconData);
  const pixelSize = getSize(size);
  const scale = pixelSize / 16;

  return (
    <svg
      className={`pixel-icon pixel-icon--${name} ${className}`}
      width={pixelSize}
      height={pixelSize}
      viewBox="0 0 16 16"
      style={{ 
        display: 'inline-block',
        verticalAlign: 'middle',
        ...(color ? { color } : {}),
      }}
    >
      {grid.map((row, y) =>
        row.map((filled, x) =>
          filled ? (
            <rect
              key={`${x}-${y}`}
              x={x}
              y={y}
              width={1}
              height={1}
              fill="currentColor"
            />
          ) : null
        )
      )}
    </svg>
  );
};

// Convenience component for inline usage with text
export const Icon: React.FC<PixelIconProps & { label?: string }> = ({
  label,
  ...props
}) => (
  <span className="pixel-icon-wrapper" title={label}>
    <PixelIcon {...props} />
  </span>
);

export default PixelIcon;










